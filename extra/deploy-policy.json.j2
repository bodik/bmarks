{
	"Version": "2012-10-17",
	"Statement": [
		{
			"Sid": "RoleDelegation",
			"Effect": "Allow",
			"Action": [
				"iam:PassRole"
			],
			"Resource": [
				"arn:aws:iam::{{ aws_account_id }}:role/bmarks-execution-role"
			]
		},
		{
			"Sid": "S3Bucket",
			"Effect": "Allow",
			"Action": [
				"s3:ListBucket",
				"s3:CreateBucket"
			],
			"Resource": [
				"arn:aws:s3:::bmarks"
			]
		},
		{
			"Sid": "S3Object",
			"Effect": "Allow",
			"Action": [
				"s3:DeleteObject",
				"s3:GetObject",
				"s3:PutObject",
				"s3:AbortMultipartUpload",
				"s3:ListMultipartUploadParts",
				"s3:ListBucketMultipartUploads"
			],
			"Resource": [
				"arn:aws:s3:::bmarks",
				"arn:aws:s3:::bmarks/*"
			]
		},
		{
			"Sid": "Lambda",
			"Effect": "Allow",
			"Action": [
				"lambda:AddPermission",
				"lambda:CreateFunction",
				"lambda:DeleteFunction",
				"lambda:GetAlias",
				"lambda:GetFunction",
				"lambda:GetFunctionConfiguration",
				"lambda:GetPolicy",
				"lambda:InvokeFunction",
				"lambda:ListVersionsByFunction",
				"lambda:RemovePermission",
				"lambda:TagResource",
				"lambda:UpdateFunctionCode",
				"lambda:UpdateFunctionConfiguration"
			],
			"Resource": [
				"arn:aws:lambda:*:{{ aws_account_id }}:function:bmarks-*"
			]
		},
		{
			"Sid": "CloudWatchLogs",
			"Effect": "Allow",
			"Action": [
				"logs:DescribeLogStreams",
				"logs:DeleteLogGroup",
				"logs:FilterLogEvents"
			],
			"Resource": [
				"arn:aws:logs:*:{{ aws_account_id }}:log-group:/aws/lambda/bmarks-*"
			]
		},
		{
			"Sid": "APIGateway",
			"Effect": "Allow",
				"Action": [
					"apigateway:DELETE",
					"apigateway:GET",
					"apigateway:PATCH",
					"apigateway:POST",
					"apigateway:PUT"
				],
			"Resource": [
				"*"
			]
		},
		{
			"Sid": "CloudFormation",
			"Effect": "Allow",
			"Action": [
				"cloudformation:CreateStack",
				"cloudformation:DeleteStack",
				"cloudformation:DescribeStackResource",
				"cloudformation:DescribeStacks",
				"cloudformation:ListStackResources",
				"cloudformation:UpdateStack"
			],
			"Resource": [
				"arn:aws:cloudformation:*:{{ aws_account_id }}:stack/bmarks-*"
			]
		},
		{
			"Sid": "EventsList",
			"Effect": "Allow",
			"Action": [
				"events:ListRules",
				"events:ListTargetsByRule",
				"events:ListRuleNamesByTarget"
			],
			"Resource": [
				"arn:aws:events:*:{{ aws_account_id }}:rule/*"
			]
		},
		{
			"Sid": "EventsManage",
			"Effect": "Allow",
			"Action": [
				"events:DeleteRule",
				"events:DescribeRule",
				"events:PutRule",
				"events:PutTargets",
				"events:RemoveTargets"
			],
			"Resource": [
				"arn:aws:events:*:{{ aws_account_id }}:rule/bmarks-*"
			]
		}
	]
}
